<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Drug Risk Analyzer</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

<style>

/* ================= THEME ================= */
:root{
  --primary: 0 84% 60%;
  --secondary-brand: 270 85% 60%;
  --primary-soft: 0 100% 96%;
  --secondary-soft: 270 100% 96%;
  --surface: 0 0% 100%;
  --foreground: 220 15% 12%;
  --muted-foreground: 220 10% 40%;
  --border: 220 15% 85%;
}

/* ================= GLOBAL ================= */
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:Inter, sans-serif;
}

body{
  background:
    radial-gradient(circle at top left, hsl(var(--primary-soft)) 0%, transparent 50%),
    radial-gradient(circle at top right, hsl(var(--secondary-soft)) 0%, transparent 50%),
    linear-gradient(90deg, hsl(var(--primary)), hsl(var(--secondary-brand)));
  color:hsl(var(--foreground));
  min-height:100vh;
}

/* ================= HEADER ================= */
.header{
  background:hsl(var(--surface));
  padding:18px 40px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  border-bottom:1px solid hsl(var(--border));
}

.logo{
  font-size:22px;
  font-weight:700;
  background:linear-gradient(90deg,
      hsl(var(--primary)),
      hsl(var(--secondary-brand)));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}

.upload-btn{
  background:linear-gradient(90deg,
      hsl(var(--primary)),
      hsl(var(--secondary-brand)));
  color:white;
  padding:10px 18px;
  border-radius:8px;
  font-weight:600;
  cursor:pointer;
}

/* ================= MAIN ================= */
.main{
  max-width:1500px;
  margin:70px auto;
  padding:0 25px;
}

.panel{
  background:hsl(var(--surface));
  border-radius:20px;
  padding:60px;
  box-shadow:0 25px 60px rgba(0,0,0,0.25);
}

.grid{
  display:grid;
  grid-template-columns:1.2fr 0.8fr;
  gap:35px;
}

/* ================= UPLOAD ================= */
.upload-box{
  border:2px dashed hsl(var(--primary));
  border-radius:14px;
  padding:40px;
  text-align:center;
  margin-top:15px;
  background:linear-gradient(
      90deg,
      hsl(var(--primary-soft)),
      hsl(var(--secondary-soft)));
}

.meta{
  margin-top:10px;
  color:hsl(var(--muted-foreground));
}

/* NEW upload button under box */
.upload-section-btn{
  margin-top:15px;
  background:linear-gradient(90deg,
      hsl(var(--primary)),
      hsl(var(--secondary-brand)));
  color:white;
  padding:10px 18px;
  border:none;
  border-radius:10px;
  font-weight:600;
  cursor:pointer;
}

/* ================= INPUT ================= */
.input{
  width:100%;
  padding:14px;
  margin-top:20px;
  border-radius:12px;
  border:1px solid hsl(var(--border));
}

/* ================= TAGS ================= */
.tags{margin-top:12px;}

.tag{
  display:inline-flex;
  background:linear-gradient(
      90deg,
      hsl(var(--primary-soft)),
      hsl(var(--secondary-soft)));
  padding:8px 14px;
  border-radius:10px;
  margin:4px;
  font-size:14px;
}

/* ================= RESULTS ================= */
.result-card{
  background:linear-gradient(
      90deg,
      hsl(var(--primary-soft)),
      hsl(var(--secondary-soft)));
  border-radius:14px;
  padding:14px 16px;
  margin-top:12px;
  display:flex;
  justify-content:space-between;
}

.badge{
  color:white;
  padding:6px 14px;
  border-radius:8px;
  font-size:14px;
  font-weight:600;
}

.safe{background:#22c55e;}
.adjust{background:#f59e0b;}
.toxic{background:#ef4444;}

.btn{
  margin-top:20px;
  padding:12px 18px;
  border-radius:10px;
  font-weight:600;
  cursor:pointer;
  display:inline-block;
}

.primary{
  background:linear-gradient(
      90deg,
      hsl(var(--primary)),
      hsl(var(--secondary-brand)));
  color:white;
}

.secondary{background:#eef2ff;}

</style>
</head>

<body>

<!-- HEADER -->
<div class="header">
  <div class="logo">Drug Risk Analyzer</div>
  
</div>

<!-- MAIN -->
<div class="main">
<div class="panel">
<div class="grid">

<!-- LEFT -->
<div>

<h3>File Upload</h3>

<div class="upload-box" id="uploadBox">
 Drag & drop VCF file here or Browse
 <div class="meta" id="fileMeta">
  Accepted format: vcf size:5MB
 </div>
</div>

<!-- NEW BUTTON UNDER UPLOAD -->
<button class="upload-section-btn" id="uploadBtn">
 Upload VCF
</button>

<h3 style="margin-top:25px;">Drug Inputs</h3>

<select class="input" id="drugSelect">
 <option disabled selected>Select drug(s)</option>
</select>

<div class="tags"></div>

<div class="btn primary">Download VCF</div>
<div class="btn primary">Click for extra info</div>

</div>

<!-- RIGHT -->
<div>

<h3>Results</h3>
<div id="results"></div>
<div class="result-card">
  <span>Lisinopril</span>
  <span class="badge safe">Safe</span>
</div>

<div class="result-card">
  <span>Ibuprofen</span>
  <span class="badge adjust">Adjust</span>
</div>

<div class="result-card">
  <span>Clopidogrel</span>
  <span class="badge toxic">Toxic/Ineffective</span>
</div>

<div class="btn primary">Generate / Download JSON</div>
<div class="btn secondary">Copy to clipboard</div>

</div>

</div>
</div>
</div>

<script>

/* ================= DRUG DATABASE ================= */
const supportedDrugs=[
 "CODEINE",
 "WARFARIN",
 "CLOPIDOGREL",
 "SIMVASTATIN",
 "AZATHIOPRINE",
 "FLUOROURACIL"
];

const drugSelect=document.getElementById("drugSelect");
supportedDrugs.forEach(drug=>{
 const opt=document.createElement("option");
 opt.value=drug;
 opt.innerText=drug;
 drugSelect.appendChild(opt);
});

/* Tags */
const tags=document.querySelector(".tags");

drugSelect.addEventListener("change",e=>{
 const tag=document.createElement("span");
 tag.className="tag";
 tag.innerText=e.target.value;
 tags.appendChild(tag);
 drugSelect.value="";
});

/* ================= FILE UPLOAD ================= */

let uploadedVCF=null;

function openFilePicker(){

 const input=document.createElement("input");
 input.type="file";
 input.accept=".vcf";

 input.onchange=e=>{
  uploadedVCF=e.target.files[0];

  if(uploadedVCF){
   document.getElementById("fileMeta").innerText=
    "Loaded: "+uploadedVCF.name;
  }
 };

 input.click();
}

/* Click events */
document.getElementById("uploadBox")
.onclick=openFilePicker;

document.getElementById("uploadBtn")
.onclick=openFilePicker;

/* ================= RESULTS ================= */

document.querySelectorAll(".primary")[1]
.onclick=()=>{

 const resultBox=document.getElementById("results");
 resultBox.innerHTML="";

 if(!uploadedVCF){
  resultBox.innerHTML=
   "<p style='color:red'>Upload VCF first</p>";
  return;
 }

 const tagList=document.querySelectorAll(".tag");

 tagList.forEach(t=>{

  const risks=["Safe","Adjust","Toxic/Ineffective"];
  const risk=risks[Math.floor(Math.random()*3)];

  resultBox.innerHTML+=`
   <div class="result-card">
    <span>${t.innerText}</span>
    <span class="badge ${
      risk==="Safe"?"safe":
      risk==="Adjust"?"adjust":"toxic"
    }">${risk}</span>
   </div>`;
 });
};

/* Copy */

document.querySelector(".secondary")
.onclick=()=>{
 navigator.clipboard.writeText("Copied Results");
 alert("Copied");
};

</script>

</body>
</html>
